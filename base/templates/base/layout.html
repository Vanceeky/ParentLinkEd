<!--
=========================================================
* Material Dashboard 2 - v3.1.0
=========================================================

* Product Page: https://www.creative-tim.com/product/material-dashboard
* Copyright 2023 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="/static/assets/img/logo_la_sallete.png">
  <link rel="icon" type="image/png" href="/static/assets/img/logo_la_sallete.png">
  <title>
    {% block title %}  {% endblock %}| ParentLinkED
  </title>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
  <!-- Nucleo Icons -->
  <link href="/static/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/static/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="/static/assets/js/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <!-- CSS Files -->
  <link id="pagestyle" href="/static/assets/css/material-dashboard.css?v=3.1.0" rel="stylesheet" />
  <!-- Nepcha Analytics (nepcha.com) -->
  <!-- Nepcha is a easy-to-use web analytics. No cookies and fully compliant with GDPR, CCPA and PECR. -->
  <link href="/static/assets/css/quill.snow.css" rel="stylesheet">

  <link rel="stylesheet" href="/static/assets/css/splide.min.css">

  <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>

  <script src="https://unpkg.com/htmx.org@2.0.2/dist/htmx.js" integrity="sha384-yZq+5izaUBKcRgFbxgkRYwpHhHHCpp5nseXp0MEQ1A4MTWVMnqkmcuFez8x5qfxr" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/htmx.org@1.9.12/dist/ext/ws.js"></script>
  
<!-- FullCalendar CSS -->
<!-- FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css" rel="stylesheet" />


<link rel="manifest" href="/static/manifest.json">

  <style>

    
    
    #navigation a:hover, .active {
        border-bottom: 2px solid #4caf50;
    }


    {% block stylesheet %}


    {% endblock %}

  </style>


</head>

<body class="">

    <div class="container position-sticky z-index-sticky top-0">
        <div class="row">
          <div class="col-12">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg blur border-radius-lg top-0 z-index-3 shadow position-absolute mt-4 py-2 start-0 end-0 mx-4">
              <div class="container-fluid ps-2 pe-0">
                 <a class="navbar-brand font-weight-bolder ms-lg-0 ms-3 " href="{% url 'index' %}">
                 ParentLinkED
                 </a>
                 
                 <div class="d-flex">

                 <button class="navbar-toggler shadow-none ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
                 <span class="navbar-toggler-icon mt-2">
                 <span class="navbar-toggler-bar bar1"></span>
                 <span class="navbar-toggler-bar bar2"></span>
                 <span class="navbar-toggler-bar bar3"></span>
                 </span>
                 </button>

               </div>
                 

                 <div class="collapse navbar-collapse w-100 pt-3 pb-2 py-lg-0" id="navigation">
                    <ul class="navbar-nav navbar-nav-hover mx-auto">
                       <li class="nav-item mx-2">
                          <a role="button" href="{% url 'index' %}" class=" {% if request.path == '/' %} active {% endif %} nav-link ps-2 cursor-pointer"aria-expanded="false">
                          Home

                          </a>

                       </li>


                       <li class="nav-item mx-2">
                        <a href="{% url 'feed' %}" role="button" class="nav-link ps-2 cursor-pointer {% if request.path == '/feed/' %} active {% endif %}"aria-expanded="false">
                        Feed

                        </a>

                       </li>

                       <li class="nav-item mx-2">
                        <a href="{% url 'upcoming_events' %} " role="button" class="{% if request.path == '/upcoming-events/' %} active {% endif %} nav-link ps-2 cursor-pointer"aria-expanded="false">
                        Upcoming Events

                        </a>

                       </li>


                                            
                       {% if request.user.is_authenticated %}
                        {% for group in request.user.groups.all %}
                           {% if group.name == 'guardian'  %}

                           <li class="nav-item mx-2">
                              <a href="{% url 'guardian_announcements' %}" role="button" class="{% if request.path == '/announcements/' %} active {% endif %} nav-link ps-2 cursor-pointer"aria-expanded="false">
                              Announcements
      
                              </a>
      
                             </li>

                             
                           {% endif %}

                        {% endfor %}

                        {% endif %}




            

                    </ul>

                    <ul class="navbar-nav d-lg-block h-auto">
                     
                        {% if request.user.is_authenticated %}
                        {% for group in request.user.groups.all %}
                           {% if group.name == 'instructor'  %}
                  
                                 <li class="nav-item dropdown dropdown-hover mx-2 h-auto">
                                    <a role="button" class="nav-link ps-2 d-flex justify-content-between cursor-pointer align-items-center" id="dropdownMenuBlocks" data-bs-toggle="dropdown" aria-expanded="false">
                                    Account
                                    <img src=" /static/assets/img/down-arrow-dark.svg " alt="down-arrow" class="arrow ms-1 d-lg-block d-none">
                                    <img src="/static/assets/img/down-arrow-dark.svg" alt="down-arrow" class="arrow ms-1 d-lg-none d-block">
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-animation dropdown-md dropdown-md-responsive border-radius-lg mt-0 mt-lg-3 dropdown-menu-end h-auto"  aria-labelledby="dropdownMenuBlocks">     
                                       <div class="d-none d-lg-block">
                                          <ul class="list-group">
                                             <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                                <a class="dropdown-item border-radius-md  text-center" href="{% url 'inbox' %}">
                                                   <div class="d-flex justify-content-center align-items-center text-dark text-center">
                                                      <i class="material-icons opacity-6 me-2 text-md">messages</i>
                                                      Inbox
                                                   </div>
                                                </a>
                                             </li>
                                             <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                                <a class="dropdown-item border-radius-md  text-center" href="{% url 'instructor_home' %}">
                                                   <div class="d-flex justify-content-center align-items-center text-dark text-center">
                                                      <i class="material-icons opacity-6 me-2 text-md">widgets</i>
                                                      Dashboard
                                                   </div>
                                                </a>
                                             </li>
                                             <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                                <a class="dropdown-item border-radius-md" href="{% url 'logout-account' %}">
                                                   <div class="d-flex justify-content-center  align-items-center text-danger">
                                                      <i class="fa fa-sign-out opacity-6 me-2 text-md"></i>
                                                      Sign out
                                                   </div>
                                                </a>
                                             </li>

          
                                          </ul>
                                       </div>
                                       <div class="row d-lg-none h-auto">
                                          <div class="col-md-12">
                                                <a class="dropdown-item border-radius-md text-center" href="{% url 'inbox' %}">
                                                   <div class="d-flex align-items-center text-dark">
                                                      <i class="material-icons opacity-6 me-2 text-md">messages</i>
                                                      Inbox
                                                   </div>
                                                </a>
                                                <a class="dropdown-item border-radius-md text-center" href="{% url 'instructor_home' %}">
                                                   <div class="d-flex align-items-center text-dark">
                                                         <i class="material-icons opacity-6 me-2 text-md">widgets</i>
                                                         Dashboard
                                                   </div>
                                                </a>
                                                <a class="dropdown-item border-radius-md" href="{% url 'logout-account' %}">
                                                   <div class="d-flex  align-items-center text-danger">
                                                         <i class="fa fa-sign-out opacity-6 me-2 text-md"></i>
                                                         Sign out
                                                   </div>
                                                </a>
                                          </div>
                                       </div>
                                      
                                    </div>
                                 </li>
                        
                           {% elif group.name == 'registrar' %}

                           
                           <li class="nav-item dropdown dropdown-hover mx-2 h-auto">
                              <a role="button" class="nav-link ps-2 d-flex justify-content-between cursor-pointer align-items-center" id="dropdownMenuBlocks" data-bs-toggle="dropdown" aria-expanded="false">
                              Account
                              <img src=" /static/assets/img/down-arrow-dark.svg " alt="down-arrow" class="arrow ms-1 d-lg-block d-none">
                              <img src="/static/assets/img/down-arrow-dark.svg" alt="down-arrow" class="arrow ms-1 d-lg-none d-block">
                              </a>
                              <div class="dropdown-menu dropdown-menu-animation dropdown-md dropdown-md-responsive border-radius-lg mt-0 mt-lg-3 dropdown-menu-end h-auto"  aria-labelledby="dropdownMenuBlocks">     
                                 <div class="d-none d-lg-block">
                                    <ul class="list-group">
                                       <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                          <a class="dropdown-item border-radius-md  text-center" type="button" data-bs-toggle="modal" data-bs-target="#event-modal">
                                             <div class="d-flex justify-content-center align-items-center text-dark text-center">
                                                <i class="fa fa-plus opacity-6 me-2 text-md"></i>
                                                Add new event
                                             </div>
                                          </a>
                                       </li>
                                       <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                          <a class="dropdown-item border-radius-md  text-center" href="{% url 'admin_dashboard' %}">
                                             <div class="d-flex justify-content-center align-items-center text-dark text-center">
                                                <i class="material-icons opacity-6 me-2 text-md">widgets</i>
                                                Dashboard
                                             </div>
                                          </a>
                                       </li>
                                       <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                          <a class="dropdown-item border-radius-md" href="{% url 'logout-account' %}">
                                             <div class="d-flex justify-content-center  align-items-center text-danger">
                                                <i class="fa fa-sign-out opacity-6 me-2 text-md"></i>
                                                Sign out
                                             </div>
                                          </a>
                                       </li>

   
                                    </ul>
                                 </div>
                                 <div class="row d-lg-none h-auto">
                                    <div class="col-md-12">
                                       <a class="dropdown-item border-radius-md text-center" type="button" data-bs-toggle="modal" data-bs-target="#event-modal">
                                          <div class="d-flex align-items-center text-dark">
                                                <i class="fa fa-plus opacity-6 me-2 text-md"></i>
                                                Add new event
                                          </div>
                                       </a>
                                       <a class="dropdown-item border-radius-md text-center" href="{% url 'admin_dashboard' %}">
                                          <div class="d-flex align-items-center text-dark">
                                                <i class="material-icons opacity-6 me-2 text-md">widgets</i>
                                                Dashboard
                                          </div>
                                       </a>
                                       <a class="dropdown-item border-radius-md" href="{% url 'logout-account' %}">
                                          <div class="d-flex  align-items-center text-danger">
                                                <i class="fa fa-sign-out opacity-6 me-2 text-md"></i>
                                                Sign out
                                          </div>
                                       </a>
                                    </div>
                                 </div>
                              
                              </div>
                           </li>
                      

                           {% elif group.name == 'guardian' %}



                              <li class="nav-item dropdown dropdown-hover mx-2 h-auto">
                                 <a role="button" class="nav-link ps-2 d-flex justify-content-between cursor-pointer align-items-center" id="dropdownMenuBlocks" data-bs-toggle="dropdown" aria-expanded="false">
                                 Account
                                 <img src=" /static/assets/img/down-arrow-dark.svg " alt="down-arrow" class="arrow ms-1 d-lg-block d-none">
                                 <img src="/static/assets/img/down-arrow-dark.svg" alt="down-arrow" class="arrow ms-1 d-lg-none d-block">
                                 </a>
                                 <div class="dropdown-menu dropdown-menu-animation dropdown-md dropdown-md-responsive border-radius-lg mt-0 mt-lg-3 dropdown-menu-end h-auto"  aria-labelledby="dropdownMenuBlocks">     
                                    <div class="d-none d-lg-block">
                                       <ul class="list-group">
                                          <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                             <a class="dropdown-item border-radius-md  text-center" href="{% url 'inbox' %}">
                                                <div class="d-flex justify-content-center align-items-center text-dark text-center">
                                                   <i class="material-icons opacity-6 me-2 text-md">message</i>
                                                   Inbox
                                                </div>
                                             </a>
                                          </li>

                                          <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                             <a class="dropdown-item border-radius-md  text-center" href="{% url 'guardian_profile' %}">
                                                <div class="d-flex justify-content-center align-items-center text-dark text-center">
                                                   <i class="fa fa-user opacity-6 me-2 text-md"></i>
                                                   Profile
                                                </div>
                                             </a>
                                          </li>

                                          <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                             <a class="dropdown-item border-radius-md  text-center" href="{% url 'guardian_home' %}">
                                                <div class="d-flex justify-content-center align-items-center text-dark text-center">
                                                   <i class="material-icons opacity-6 me-2 text-md">widgets</i>
                                                   Students
                                                </div>
                                             </a>
                                          </li>
                                          <li class="nav-item dropdown dropdown-hover dropdown-subitem list-group-item border-0 p-0">
                                             <a class="dropdown-item border-radius-md" href="{% url 'logout-account' %}">
                                                <div class="d-flex justify-content-center  align-items-center text-danger">
                                                   <i class="fa fa-sign-out opacity-6 me-2 text-md"></i>
                                                   Sign out
                                                </div>
                                             </a>
                                          </li>

      
                                       </ul>
                                    </div>
                                    <div class="row d-lg-none h-auto">
                                       <div class="col-md-12">
                                          <a class="dropdown-item border-radius-md text-center" href="{% url 'inbox' %}">
                                             <div class="d-flex align-items-center text-dark">
                                                <i class="material-icons opacity-6 me-2 text-md">message</i>
                                                Inbox
                                             </div>
                                          </a>
                                          <a class="dropdown-item border-radius-md text-center" href="{% url 'guardian_home' %}">
                                             <div class="d-flex align-items-center text-dark">
                                                   <i class="material-icons opacity-6 me-2 text-md">widgets</i>
                                                   Students
                                             </div>
                                          </a>
                                          <a class="dropdown-item border-radius-md" href="{% url 'logout-account' %}">
                                             <div class="d-flex  align-items-center text-danger">
                                                   <i class="fa fa-sign-out opacity-6 me-2 text-md"></i>
                                                   Sign out
                                             </div>
                                          </a>
                                       </div>
                                    </div>
                                 
                                 </div>
                              </li>

       

                           {% endif %}




                           {% endfor %}
                           {% else %}

                           <li class="nav-item">
                              <a href="{% url 'accounts-login' %}" class="btn btn-sm  bg-gradient-success  mb-0">Login Account</a>
                           </li>

                        {% endif%}
                        

                    </ul>
                 </div>
              </div>
            </nav>
            <!-- End Navbar -->
          </div>
        </div>
    </div>

    {% block content %}



    {% endblock %}

    <div class="offcanvas offcanvas-end w-100" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
      <div class="offcanvas-header">
        <h5 id="offcanvasRightLabel">Conversation</h5>
        <button type="button" class="btn text-reset" data-bs-dismiss="offcanvas" aria-label="Close"><i class="fa fa-close"></i></button>
      </div>
      <div class="offcanvas-body">
          <div class="card h-100">
              <div class="card-body p-3">
                 <ul class="list-group">
                      {% for info in groups_info %}
                          {% for member in info.other_members %}
                              
                                  <li class=" member list-group-item border-0 d-flex align-items-center px-0 mb-2 border-bottom" 
                                  data-group-id="{{ info.group.id }}" 
                                  data-group-name="{{ info.group.group_name }}">
                    
                                      <div class="avatar me-3">
                                          <img src="/static/images/default_avatar.png" alt="kal" class="border-radius-lg shadow avatar-sm">
                                      </div>
                                      <div class="d-flex align-items-start flex-column justify-content-center">
                                          {% for member in info.other_members %}
                                          <h6 class="mb-0 text-md">{{ member.first_name }} {{ member.last_name }}</h6>
                                          {% endfor %}
                                          <p class="mb-0 text-sm text-dark">{{ info.last_message }}</p>
                                      </div>
                                      <a class="btn btn-link pe-3 ps-0 mb-0 ms-auto text-info" href="{% url 'chatroom' info.group.group_name%}">Reply</a>
                               
                                  </li>
  
                          {% endfor %}
  
                      {% empty %}
                      <p class="text-center">No Conversations found!</p>
                      {% endfor %}
  
                 </ul>
              </div>
           </div>
      </div>
   </div>

   <!-- Modal -->
<div class="modal fade" id="event-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-md modal-dialog-centered modal-sm" role="document">
     <div class="modal-content">
       <div class="modal-header">
         <h5 class="modal-title" id="exampleModalLabel">Add new Event</h5>
         <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
           <span aria-hidden="true">&times;</span>
         </button>
       </div>
       <form method='POST' action="{% url 'add_event' %}" id="add-event-form" >
         {% csrf_token %}
         <div class="modal-body">
            <div class="input-group input-group-outline mb-4">
               <input type="text" class="form-control" name="title" required placeholder="Title...">
            </div>

            <div class="input-group input-group-dynamic">
               <textarea class="form-control" rows="1" name="description" required placeholder="Event Description..." spellcheck="false"></textarea>
            </div>

            <div class="input-group input-group-static my-3">
               <label>Date</label>
               <input type="date" name="date" class="form-control">
            </div>

         </div>
         <div class="modal-footer">
            <button type="submit" class="btn bg-gradient-info">Add event</button>
         </div>
      </form>
     </div>
   </div>
 </div>



           <!--   Core JS Files   -->
  {% include 'includes/scripts.html ' %}


  {% block js %}


  {% endblock %}

  <script>
   $(document).ready(function() {
       $('#add-event-form').on('submit', function(e) {
           e.preventDefault(); 

           $.ajax({
               type: 'POST',
               url: $(this).attr('action'),
               data: $(this).serialize(),  
               success: function(response) {
               
                   Swal.fire({
                       icon: response.status === 'success' ? 'success' : 'error',
                       title: response.message,
                       showConfirmButton: true,
                   });
                  
                   if (response.status === 'success') {
                       $('#add-event-form')[0].reset();
                       setTimeout(function() {
                           window.location.href = '{% url "upcoming_events" %}';
                       }, 1500);
                   }
               },
               error: function() {
                   Swal.fire({
                       icon: 'error',
                       title: 'An unexpected error occurred.',
                       showConfirmButton: true,
                   });
               }
           });
       });
   });
</script>



</body>

</html>