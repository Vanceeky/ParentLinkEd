{% extends 'base/instructor/base.html' %}

{% block title %} {{ subject.name }} {% endblock %}

{% block stylesheet %}

<style>
    .button-like {
        cursor: pointer; /* Change cursor to indicate it's clickable */
        transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease; /* Smooth transition */
    }
    
    .button-like:hover {
        transform: scale(1.02); /* Scale the card up slightly */
        background-color: rgba(0, 123, 255, 0.1); /* Change to your desired hover color */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add shadow on hover */
    }

    #editor {
        width: 100%; /* Adjust width as needed */
        height: 200px; /* Adjust height as needed */
      }



</style>
{% endblock %}





{% block content %}


<div class="row">
    <div class=" col-12">
        <div class="card">
            <div class="card-header p-3">
                <div class="row">
                    <div class="col-12">
                        <div class="nav-wrapper position-relative end-0">
                            <ul class="nav nav-pills nav-fill p-1 flex-row" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link mb-0 px-0 py-1 d-flex align-items-center justify-content-center active" id="stream-tab" data-bs-toggle="pill" href="#stream" aria-selected="true">
                                        <i class="fa-solid fa-bars-staggered"></i>
                                        <span class="ms-2">Stream</span>
                                    </a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link mb-0 px-0 py-1 d-flex align-items-center justify-content-center" id="attendance-tab" data-bs-toggle="pill" href="#attendance" aria-selected="false" tabindex="-1">
                                        <i class="fa-solid fa-clipboard-user"></i>
                                        <span class="ms-2">Attendance</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>
                <hr class="horizontal dark mb-0">
            </div>
            <div class="card-body p-3 pt-0">

                    <div class="d-flex justify-content-center">
                        

                        <div class="col-lg-8 col-12 mb-xl-0 mb-4 mt-3">

                            <div class="tab-content mt-3">

                                <div class="tab-pane fade show active" id="stream" role="tabpanel" aria-labelledby="stream-tab">
                                    <div class="card bg-transparent shadow-xl">
                                        <div class="overflow-hidden position-relative border-radius-xl">
                                            <img src="/static/assets/img/img_bookclub.jpg" class="position-absolute start-0 top-0 w-100 z-index-1 h-100" alt="pattern-tree">
                                            <!--<span class="mask bg-gradient-success opacity-10"></span>-->
        
                                            <div class="card-body position-relative z-index-1 p-3">
                                                <div class="d-flex justify-content-between align-items-center">
                                                
                                            
                                                    <a href=""><h6 class="text-white text-md mb-0">{{ subject.day }} :  {{ subject.start_time }} - {{ subject.end_time }}</h6></a>
                                                    
                                                    
                            
                                                </div>
                                                <h5 class="text-white mt-4 text-uppercase">{{subj.name}}<br><span class="text-capitalize"><p>{{ subj.description}}</p></span></h5>
                                                
        
                                                <div class="d-flex mb-0">
                                
        
                                                    <h3 class="text-white mt-4 text-uppercase">{{subject.name}}<br>
                                                        
                                                        {% for section, students in sections_with_students %}
                                                        <span class="text-capitalize"><p> {{ section.year_level }} - {{ section.section }}</p></span>
                                                        {% empty %}
                                                        <li>No sections found for this subject.</li>
                                                        {% endfor %}
                                                    </h3>
                                                        
                                                    
                    
                    
                                                </div>
                                
                                                 
                            
                            
                                            </div>
                                        </div>
                                      
                                    </div>

                                    <div class=" mt-4">
                                        <div class="row">
                                            <div class="col-12 col-lg-3">
                                                <div class="card card-background card-background-mask-success h-auto">
                                                    <div class="card-body pt-4 text-center">
                                                  
                                                    
                                                     
                                                       <h6 class="day text-white mb-0" id="day"></h6>
                                                       <p id="date_time"></p>
                                                       <h3 class="time text-white" id="time"></h3>
                                                       <span class="date badge d-block bg-gradient-dark mb-2" id="date"></span>

                                                       <a href="javascript:;" type="button" data-bs-toggle="modal" data-bs-target="#attendance-modal" class="btn bg-gradient-info btn-sm px-5 mb-0"><i class="fa fa-plus me-2" style="font-size: 12px; font-weight: bold"></i>Attendance</a>

                                                    </div>
                                                </div>

                                            </div>
        
                                            <div class="col-12 col-lg-9">
                                                <div id="announcement" class="card shadow p-2 mb-5 bg-body rounded button-like" onclick="toggleAnnouncementDisplay()">
                                                    <div class="d-flex px-2 py-1">
                                                        <div>
                                                            <img src="/static/assets/img/logo.png" class="avatar avatar-lg me-3">
                                                        </div>
                                                        <div class="d-flex flex-column justify-content-center">
                                                            <h6 class="mb-0 text-sm text-capitalize"><a href="#" class="text-decoration-none">Announce something to your class</a></h6>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                

                                                <form id="announcementForm" method="POST" action="{% url 'create_announcement' %}" class="mb-2">
                                                    {% csrf_token %}
                                                    
                                                    <input type="hidden" value="{{ subject.id }}" name="subject_id">
                                                    <input type="hidden" name="content" id="hiddenContent">
                                                    <input type="hidden" name="selected_students" id="selectedStudents">
                                                    <input type="hidden" name="all_students" id="allStudentsCheckbox" value="">

                                                    <div id="display_announcement" class="card shadow p-3" style="display: none;">
                                                        <label>Announce something to your class</label>
                                                        <div id="editor"></div>

                                                        <div class="d-flex justify-content-between align-items-center mt-2 p-2">
                                                            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#modal-announce">
                                                                <i class="fa fa-user"></i> <span id="student_number">All Students</span>
                                                            </button>
                                                            <div>
                                                                <a type="button" class="btn text-danger ml-auto" onclick="toggleAnnouncementDisplay()">Cancel</a>
                                                                <button type="submit" class="btn btn-info">Post</button>
                                                            </div>
                                                        </div>

                                                        <!-- Modal -->
                                                        <div class="modal fade" id="modal-announce" tabindex="-1" role="dialog" aria-labelledby="modal-default" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h6 class="modal-title" id="modal-title-default">Announce To</h6>
                                                                        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <div class="form-check">
                                                                            <input class="form-check-input" type="checkbox" id="checkAll" onclick="toggleAllStudents(this)" checked>
                                                                            <label class="form-check-label" for="checkAll">All Students</label>
                                                                        </div>
                                                                        <hr class="dark horizontal">
                                                                        {% for section, students in sections_with_students %}
                                                                            {% for student in students %}
                                                                            <div class="form-check">
                                                                                <input class="form-check-input" type="checkbox" value="{{ student.id }}" id="student-{{ student.id }}" onchange="updateButtonLabel()" checked>
                                                                                <label class="form-check-label" for="student-{{ student.id }}">{{ student.firstname }} {{ student.lastname }}</label>
                                                                            </div>
                                                                            {% empty %}
                                                                                <div>No students enrolled</div>
                                                                            {% endfor %}
                                                                        {% endfor %}
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn bg-gradient-info" data-bs-dismiss="modal">Done</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>


                                                <div id="announcementsContainer">
                                                    {% for a in announcements reversed %}
                                                        <div class="card shadow mb-2" data-announcement-id="{{ a.id }}">
                                                            <div class="card-header p-3 pb-0">
                                                                <div class="row">
                                                                    <div class="col-8 d-flex">
                                                                        <div>
                                                                            <img src="{{ a.instructor.avatar.url }}" class="avatar avatar-sm me-2" alt="avatar image"> 
                                                                        </div>
                                                                        <div class="d-flex flex-column justify-content-center">
                                                                            <h6 class="mb-0 text-sm text-capitalize">{{ a.instructor.user.first_name }} {{ a.instructor.user.last_name }}
                                                                                {% if a.all_students %}
                                                                                <span class="ms-2">
                                                                                    <i class="fa fa-chevron-right me-2"></i> All students
                                                                                </span>
                                                                                {% else %}
                                                                                <span class="ms-2">
                                                                                    <i class="fa fa-chevron-right me-2"></i>
                                                                                    {% for student in a.selected_students.all %}
                                                                                    <a href="{% url 'instructor_student_profile' student.student_id %}">
                                                                                        {{ student.firstname }} {{ student.lastname }}{% if not forloop.last %}, {% endif %}
                                                                                    </a>
                                                                                    {% endfor %}
                                                                                </span>
                                                                                {% endif %}
                                                                            </h6> 
                                                                            <p class="text-xs">Posted: {{ a.created_at|timesince }} ago</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-4">
                                                                        <div class="d-flex justify-content-end pe-4">
                                                                            <div class="dropdown dropend">
                                                                                <a href="javascript:;" class="cursor-pointer rounded-circle" id="dropdownTable1" data-bs-toggle="dropdown" aria-expanded="false">
                                                                                    <i class="fa fa-solid fa-ellipsis-v" aria-hidden="true"></i>
                                                                                </a>
                                                                                <ul class="dropdown-menu dropdown-menu-end border-radius-md ms-n5" aria-labelledby="dropdownTable1">
                                                                                    <li><a class="dropdown-item border-radius-md" href="javascript:;">Edit</a></li>
                                                                                    <li><a class="dropdown-item border-radius-md text-danger" href="javascript:;">Remove</a></li>
                                                                                </ul>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-body p-3 pt-1 text-dark">
                                                                <p class="text-md">{{ a.content|safe }}</p>
                                                            </div>
                                                        </div>
                                                    {% empty %}
                                                    <div class="card shadow mt-3 p-4">
                                                        <div class="card-body p-3">
                                                        <div class="d-flex">
                                                            <div class="icon icon-shape bg-gradient-dark text-center rounded-circle ms-auto">
                                                                <i class="fa fa-book text-lg opacity-10" aria-hidden="true"></i>
                                                            </div>
            
                                                            <div class="numbers mb-0 ms-3">
                                                                <h4 class="text-muted font-weight-bolder mb-0">This is where you can talk to your class</h4>
                                                                <p class="mb-0">
                                                                    Use the stream to share announcements, post assignments and respond to questions.
                                                                </p>
                                                            </div>
            
                                                        </div>
            
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                                </div>


        
                                            </div>
        
        
                                        </div>
                                    </div>
                                </div>


                                <div class="tab-pane fade" id="attendance" role="tabpanel" aria-labelledby="attendance-tab">
                                    <div class="d-flex justify-content-between align-items-center">

                                        <h5>Attendance</h5>
                                        <!--
                                        <p id="date_time"></p>
                                        -->
                                    </div>

                                    <div class="table-responsive p-3">
                                        <table class="table align-items-center mb-0 mt-0 p-3" id="student_table">
                                          <thead>
                                            <tr>
                                              <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Student</th>
                                              <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Date</th>
                                              <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Status</th>
                                            </tr>
                                          </thead>
                                          <tbody>
                                            {% for a in attendance %}
                                    
                          
                                                <tr>
                                                    <td>
                                                    <div class="d-flex px-2 py-1">
                                                        <div>
                                                        <img src="{{ a.student.avatar.url }}" class="avatar avatar-sm me-3">
                                                        </div>
                                                        <div class="d-flex flex-column justify-content-center">
                                                        <h6 class="mb-0 text-sm text-capitalize"><a href="{% url 'instructor_student_profile' a.student.student_id %}">{{ a.student.firstname }} {{ a.student.lastname }}</a> ( {{ a.student.gender}}, {{ a.student.age }} )</h6>
                                                        <p class="text-sm text-secondary mb-0">{{ student.id }}</p>
                                                        </div>
                                                    </div>
                                                    </td>

                                                    <td class="align-middle text-center">
                                                        <p class="text-sm font-weight-bold mb-0">{{ a.date|date:"l, F j, Y" }}</p>
                                                
                                                    </td>
                                                    <td class="text-center">
                                                        {% if a.status == 'present' %}
                                                        <span class="badge badge-pill badge-md bg-gradient-success">{{a.status}}</span>
                                                        {% else %}

                                                        <span class="badge badge-pill badge-md bg-gradient-warning">{{a.status}}</span>

                                                        {% endif %}
                                                    </td>
                            
                                                </tr>
                            
                                         
                                              {% endfor %}

                                              

                          
                          
                          
                          
                                          </tbody>
                                        </table>
    
                                      </div>

                                </div>
                            </div>




                        </div>


                    </div>


            </div>
        </div>
    </div>

</div>



<!-- Modal -->
<div class="modal fade" id="attendance-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <form method="POST" action="{% url 'record_attendance' %}" id="attendance-form">
            {% csrf_token %}
            <input type="hidden" name="subject_id" value="{{ subject.id }}">
            <div class="modal-header">
            <h5 class="modal-title me-2" id="exampleModalLabel">Attendance</h5>

                <div class="input-group input-group-outline">
                    <label class="form-label">Search here...</label>
                    <input type="text" class="form-control" id="student-search-input" oninput="filterStudents()" onfocus="focused(this)" onfocusout="defocused(this)">
                </div>
            </div>
            <div class="modal-body" style="max-height: 300px; overflow-y: auto;">
                <table class="table align-items-center mb-0">
                    <thead>
                        <tr>
                        <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Student</th>
                        <th class="text-secondary opacity-7"></th>

                        </tr>
                    </thead>

                

                    <tbody  id="student-list">
                        {% for section, students in sections_with_students %}
                            {% for student in students %}

                                <tr class="student-row">
                                    <td>
                                        <div class="d-flex px-2 py-1">
                                        <div>
                                            <img src="{{ student.avatar.url }}" class="avatar avatar-sm me-3">
                                        </div>
                                        <div class="d-flex flex-column justify-content-center">
                                            <h6 class="mb-0 text-md text-capitalize student-name small">{{ student.firstname }} {{ student.lastname}}</h6>
                                        </div>
                                        </div>
                                    </td>
                                    
                                    <td>
                                        <input type="hidden" name="student_id_{{ student.id }}" value="{{ student.id }}">

                                        <div class="d-flex mt-2">
                                            <div class="form-check mb-3 mt-3">
                                                <input class="form-check-input" type="radio" name="attendance_{{ student.id }}" id="present_{{ student.id }}" value="present" required>
                                                <label class="custom-control-label small">Present</label>
                                            </div>
                                            <div class="form-check mt-3">
                                                <input class="form-check-input" type="radio" name="attendance_{{ student.id }}" id="absent_{{ student.id }}" value="absent" required>
                                                <label class="custom-control-label small">Absent</label>
                                            </div>
                                            </div>
                            
                                        </div>
                                    </td>
                                </tr>
                        
                                
                                {% empty %}
                                <div>No students enrolled</div>

                            {% endfor %}
                        {% endfor %}
                    </tbody>

                </table>

                <div id="no-students-message" class="text-center mt-3" style="display: none;">No matching record found</div>

            </div>
            <div class="modal-footer">
            <button type="button" class="btn bg-gradient-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn bg-gradient-info" onclick="confirmAttendance()">Save changes</button>
            </div>
        </form>
      </div>
    </div>
</div>


{% endblock %}

{% block js %}

<script src="/static/assets/js/quill.js"></script>
<script src="/static/assets/js/sweet_alert.js"></script>

<script>
    function filterStudents() {

        var input = document.getElementById("student-search-input");
        var filter = input.value.toLowerCase();
        var rows = document.getElementsByClassName("student-row");
        var noStudentsMessage = document.getElementById("no-students-message");
        var visibleRows = 0;
    
    
        for (var i = 0; i < rows.length; i++) {
            var studentNameElement = rows[i].getElementsByClassName("student-name")[0];
            var studentName = studentNameElement.textContent || studentNameElement.innerText;
    
         
            if (studentName.toLowerCase().indexOf(filter) > -1) {
                rows[i].style.display = ""; 
                visibleRows++;
            } else {
                rows[i].style.display = "none"; 
            }
        }
    
 
        noStudentsMessage.style.display = (visibleRows === 0) ? "block" : "none";
    }
</script>



<script>
    function confirmAttendance() {
        Swal.fire({
            title: 'Are you sure?',
            text: "Do you want to record the attendance?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, save it!'
        }).then((result) => {
            if (result.isConfirmed) {
                // Submit the form via AJAX
                const form = document.getElementById('attendance-form');
                const formData = new FormData(form);

                fetch(form.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest',  // This is important for Django to recognize the request as AJAX
                    },
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        Swal.fire(
                            'Success!',
                            'Attendance has been recorded.',
                            'success'
                        ).then(() => {

                            const radios = document.querySelectorAll('input[type="radio"]');
                            radios.forEach(radio => {
                                radio.checked = false; // Uncheck all radio buttons
                            });
                            // Optionally, close the modal or redirect
                            $('#attendance-modal').modal('hide'); // Close the modal if using Bootstrap
                        });
                    } else {
                        Swal.fire(
                            'Error!',
                            'There was a problem recording attendance. Please try again.',
                            'error'
                        );
                    }
                })
                .catch(error => {
                    Swal.fire(
                        'Error!',
                        'There was a problem with the request. Please try again.',
                        'error'
                    );
                });
            }
        });
    }
</script>




<script>
    let table = new DataTable('#student_table');

</script>

<script>

    const quill = new Quill('#editor', {
        theme: 'snow'
    });


    function showSweetAlert(icon, title, text, shouldReload = false) {
        Swal.fire({
            icon: icon,
            title: title,
            text: text
        }).then(() => {
            if (shouldReload) {
                location.reload(); 
            }
        });
    }


    document.getElementById('announcementForm').addEventListener('submit', function (event) {
      
        event.preventDefault();

       
        const content = quill.root.innerHTML; 
        document.getElementById('hiddenContent').value = content;


        if (!content.trim() || content === '<p><br></p>') {
            showSweetAlert('info', 'Info', 'Announcement cannot be empty.');
            return; 
        }

        // Check if content is empty
        if (!content.trim()) {
            showSweetAlert('error', 'Error', 'Announcement cannot be empty.');
            return; 
        }

        const selectedStudents = [];
        const studentCheckboxes = document.querySelectorAll('input[type="checkbox"]:not(#checkAll)');
        studentCheckboxes.forEach(checkbox => {
            if (checkbox.checked) {
                selectedStudents.push(checkbox.value);
            }
        });
        document.getElementById('selectedStudents').value = selectedStudents.join(',');

        const allStudentsCheckbox = document.getElementById('checkAll');
        document.getElementById('allStudentsCheckbox').value = allStudentsCheckbox.checked ? 'on' : 'off';

        // AJAX submission
        const formData = new FormData(this); 

        fetch(this.action, {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest' 
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                showSweetAlert('success', 'Success', data.message, true); 
            } else {
                showSweetAlert('error', 'Error', data.message); 
            }
        })
        .catch(error => {
            console.error('Error:', error);
            showSweetAlert('error', 'Error', 'There was an issue submitting your announcement.');
        });
    });

    function toggleAllStudents(source) {
        const checkboxes = document.querySelectorAll('.form-check-input[type="checkbox"]:not(#checkAll)');
        checkboxes.forEach(checkbox => {
            checkbox.checked = source.checked;
        });
        updateButtonLabel();
    }


    function updateButtonLabel() {
        const checkboxes = document.querySelectorAll('.form-check-input[type="checkbox"]:not(#checkAll)');
        const checkedCount = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
        const studentNumberLabel = document.getElementById('student_number');
        const allStudentsCheckbox = document.getElementById('checkAll');

        if (checkedCount === checkboxes.length) {
            allStudentsCheckbox.checked = true; 
        } else {
            allStudentsCheckbox.checked = false; 
        }

        studentNumberLabel.textContent = allStudentsCheckbox.checked
            ? 'All Students'
            : checkedCount > 0 ? `${checkedCount} student${checkedCount > 1 ? 's' : ''}` : '';
    }

 
    function addIndividualCheckboxListeners() {
        const checkboxes = document.querySelectorAll('.form-check-input[type="checkbox"]:not(#checkAll)');
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateButtonLabel);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        updateButtonLabel();
        addIndividualCheckboxListeners(); 
    });
</script>

  

<script>
    function toggleAnnouncementDisplay() {
        const announcementDisplay = document.getElementById('display_announcement');
        const announcement = document.getElementById('announcement');

        if (announcementDisplay.style.display === 'none' || announcementDisplay.style.display === '') {
            announcementDisplay.style.display = 'block';  // Show the announcement display
            announcement.style.display = 'none';           // Hide the announcement section
        } else {
            announcementDisplay.style.display = 'none';   // Hide the announcement display
            announcement.style.display = 'block';         // Show the announcement section
        }
    }
</script>



<!--
<script>
    function toggleAllStudents(source) {
        const checkboxes = document.querySelectorAll('.form-check-input[type="checkbox"]:not(#checkAll)');
        checkboxes.forEach(checkbox => {
            checkbox.checked = source.checked; 
        });
        updateButtonLabel(); 
    }

    function updateButtonLabel() {
        const checkboxes = document.querySelectorAll('.form-check-input[type="checkbox"]:not(#checkAll)');
        const checkedCount = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
        const studentNumberLabel = document.getElementById('student_number');

        if (document.getElementById('checkAll').checked) {
            studentNumberLabel.textContent = 'All Students';
        } else {
            studentNumberLabel.textContent = checkedCount > 0 ? checkedCount + ' student' + (checkedCount > 1 ? 's' : '') : '';
        }
    }

   
    document.addEventListener('DOMContentLoaded', () => {
        updateButtonLabel();
    });
</script>
-->

<script>
    function updateDateTime() {
        const now = new Date();

        // Get the options for day, date, and time formatting
        const dayOptions = { weekday: 'long' };
        const dateOptions = { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        };
        const timeOptions = { 
            hour: '2-digit', 
            minute: '2-digit', 
            second: '2-digit', 
            hour12: true 
        };

        // Format each part
        const formattedDay = now.toLocaleDateString('en-US', dayOptions);
        const formattedDate = now.toLocaleDateString('en-US', dateOptions);
        const formattedTime = now.toLocaleTimeString('en-US', timeOptions);

        // Update all corresponding elements with the same class
        document.querySelectorAll('.day').forEach(element => {
            element.innerText = formattedDay;
        });
        document.querySelectorAll('.date').forEach(element => {
            element.innerText = formattedDate;
        });
        document.querySelectorAll('.time').forEach(element => {
            element.innerText = formattedTime;
        });
    }

    // Update the date and time immediately when the page loads
    updateDateTime();

    // Optionally, update every second
    setInterval(updateDateTime, 1000);
</script>


{% endblock %}